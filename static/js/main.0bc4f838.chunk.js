(this["webpackJsonpalbum-app"]=this["webpackJsonpalbum-app"]||[]).push([[0],{29:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(20),s=n.n(c),i=(n(29),n(6)),l=n(21),u=n(4),o=n(11),d=n.n(o),b=n(22),j=n.n(b),m=n(0);function h(e,t){return"UPDATE_ALBUMS"===t.type?t.payload:e}var x=a.a.createContext({addAlbum:function(){},removeAlbum:function(){},albums:[],filteredAlbums:[],loading:!0,hasFilter:!1,setFilteredAlbum:function(){}}),f=function(e){var t=e.children,n=a.a.useState([]),r=Object(u.a)(n,2),c=r[0],s=r[1],o=a.a.useState([]),b=Object(u.a)(o,2),f=b[0],g=b[1],p=a.a.useState(!0),O=Object(u.a)(p,2),v=O[0],P=O[1],y=a.a.useState(!1),C=Object(u.a)(y,2),A=C[0],I=C[1],N=a.a.useReducer(h,[]),w=Object(u.a)(N,2),S=w[0],L=w[1];a.a.useEffect((function(){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("https://itunes.apple.com/us/rss/topalbums/limit=100/json");case 2:(t=e.sent)&&(s(t.data.feed.entry),P(!1));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),a.a.useEffect((function(){L({type:"UPDATE_ALBUMS",payload:c})}),[c]);var F=a.a.useMemo((function(){return{addAlbum:function(e){s([].concat(Object(i.a)(c),[e]))},removeAlbum:function(e){var t=c.filter((function(t){return t.id.attributes["im:id"]!==e.id.attributes["im:id"]}));s(Object(i.a)(t))},albums:S,filteredAlbums:f,setFilteredAlbum:g,loading:v,hasFilter:A,setHasFilter:I}}),[S,c,f,g,v,A,I]);return console.log("hasFilter",A),Object(m.jsx)(x.Provider,{value:F,children:t})},g=a.a.createContext({itemsPerPage:12,currentPageIndex:0,setCurrentPageIndex:function(){}}),p=function(e){var t=e.children,n=a.a.useState(0),r=Object(u.a)(n,2),c=r[0],s=r[1];return console.log("provider",c),Object(m.jsx)(g.Provider,{value:{itemsPerPage:12,currentPageIndex:c,setCurrentPageIndex:s},children:t})},O=function(e){var t=e.name,n=e.image,r=e.price;e.artist,e.rights;return Object(m.jsxs)("div",{className:"w-full md:max-w-full md:flex",children:[Object(m.jsx)("div",{className:"h-48 md:h-auto flex-none bg-cover rounded-t md:rounded-t-none md:rounded-l text-center overflow-hidden",children:Object(m.jsx)("img",{className:"h-auto max-w-full",src:n,alt:t})}),Object(m.jsxs)("div",{className:"md:w-full border-r border-b border-l border-gray-400 md:border-l-0 md:border-t md:border-gray-400 bg-white rounded-b md:rounded-b-none md:rounded-r p-4 flex flex-col justify-between leading-normal",children:[Object(m.jsx)("h2",{children:t}),Object(m.jsx)("div",{children:Object(m.jsxs)("p",{children:["Price: ",r]})})]})]})},v=function(e){var t=e.data;return e.isLoading?Object(m.jsx)("h2",{className:"loading",children:"Loading..."}):Object(m.jsx)("div",{children:t.length>0?Object(m.jsx)("ul",{className:"grid grid-cols-3 gap-x-8 gap-y-4",children:t.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(O,{name:e["im:name"].label,image:e["im:image"][2].label,price:e["im:price"].label,artist:e["im:artist"].label,rights:e.rights.label})},e.id.attributes["im:id"])}))}):Object(m.jsx)("p",{children:"There's no match for your search, please try again."})})},P=n(24),y=n(23),C=function(e){e.label;var t=e.onInputChange,n=e.onInputKeyPress,r=e.onSubmitSearch,a=e.inputId;return Object(m.jsxs)("div",{className:"my-5",children:[Object(m.jsx)("label",{"data-testid":"searchLabel",className:"sr-only",htmlFor:a,children:"Type in here to search"}),Object(m.jsx)("input",{className:"shadow appearance-none border rounded px-3 mr-3 text-gray-700 leading-tight focus:outline-none focus:ring focus:border-blue-500 h-8",id:a,"data-testid":"searchInput",type:"text",onChange:function(e){return t(e)},onKeyPress:n}),Object(m.jsxs)("button",{onClick:r,children:[Object(m.jsx)(P.a,{icon:y.a}),Object(m.jsx)("span",{className:"sr-only",children:"Search"})]})]})},A=function(e){var t=e.filterAlbums,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=function(){t(c)};return Object(m.jsx)("div",{className:"search-wrap",children:Object(m.jsx)(C,{label:"Type in here to search",inputId:"album-search",onInputChange:function(e){s(e.target.value.toLowerCase())},onInputKeyPress:function(e){"Enter"===e.key&&i()},onSubmitSearch:i})})},I=function(e){var t=e.hasCurrent,n=e.currentValue,r=e.onClick,a=e.buttonText;return Object(m.jsx)("button",{className:"bg-transparent font-semibold py-2 px-4 border hover:border-black rounded","aria-current":t?n:void 0,onClick:r,children:a})},N=function(e){for(var t=e.dataLength,n=Object(r.useContext)(g),a=n.itemsPerPage,c=n.currentPageIndex,s=n.setCurrentPageIndex,i=[],l=1;l<=Math.ceil(t/a);l++)i.push(l);return Object(m.jsx)("nav",{children:Object(m.jsx)("ul",{className:"flex mt-5 p-5 gap-x-2",children:i.map((function(e){return Object(m.jsx)("li",{className:c+1===e?"text-blue-600":"",children:Object(m.jsx)(I,{hasCurrent:!0,currentValue:c+1===e?"page":null,onClick:function(){return function(e){s(e-1)}(e)},buttonText:e})},e)}))})})},w=function(){var e=Object(r.useContext)(x),t=e.albums,n=e.loading,a=e.filteredAlbums,c=e.setFilteredAlbum,s=Object(r.useContext)(g),l=s.itemsPerPage,u=s.currentPageIndex,o=s.setCurrentPageIndex,d=a.length>0?a:t,b=d.length>l?(u+1)*l:d.length,j=b-l,h=d.slice(j,b);return Object(m.jsxs)("div",{className:"p-4 md:p-8 flex flex-col items-center",children:[Object(m.jsx)("h1",{className:"text-3xl font-black",children:"Top Albums"}),Object(m.jsx)(A,{filterAlbums:function(e){if(e){var n=t.filter((function(t){return t["im:name"].label.toLowerCase().includes(e.toLowerCase())}));c(Object(i.a)(n))}else c([]);o(0)}}),Object(m.jsx)(v,{data:h,isLoading:n}),Object(m.jsx)(N,{dataLength:d.length})]})},S=function(){return Object(m.jsx)("div",{className:"app-container",children:Object(m.jsx)(w,{})})};var L=function(){return Object(m.jsx)(f,{children:Object(m.jsx)(p,{children:Object(m.jsx)(S,{})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root")),F()}},[[52,1,2]]]);
//# sourceMappingURL=main.0bc4f838.chunk.js.map